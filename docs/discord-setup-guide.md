# Discord サーバー セットアップガイド

中道改革連合 政策提案プラットフォームのDiscordサーバー構築手順です。

## 1. サーバーの作成

1. Discordアプリ（またはブラウザ版）を開く
2. 左のサーバー一覧の「+」ボタンをクリック
3. 「オリジナルを作成」を選択
4. 「コミュニティ向け」を選択
5. サーバー名: `中道改革連合 - 政策提案`
6. アイコン: 任意（後から変更可能）

## 2. コミュニティ機能の有効化

サーバー設定 → コミュニティ → コミュニティを有効化

これにより以下が使えるようになります：
- ウェルカム画面
- サーバーディスカバリー（任意）
- アナウンスチャンネル

## 3. カテゴリ・チャンネル構成

以下の構成で作成してください。

### カテゴリ: 📢 お知らせ
| チャンネル | 種類 | 権限 | 説明 |
|-----------|------|------|------|
| `#announcements` | アナウンス | 運営のみ投稿可 | 運営からの告知 |
| `#github-feed` | テキスト | 読み取り専用 | GitHub更新の自動通知 |
| `#adopted-policies` | テキスト | 運営のみ投稿可 | 採択された政策の報告 |
| `#rules` | テキスト | 読み取り専用 | サーバールール |

### カテゴリ: 🏛️ 政策議論
| チャンネル | 種類 | 権限 | 説明 |
|-----------|------|------|------|
| `#economy` | テキスト | 全員書き込み可 | 経済・財政政策 |
| `#education` | テキスト | 全員書き込み可 | 教育・子育て政策 |
| `#healthcare` | テキスト | 全員書き込み可 | 医療・福祉政策 |
| `#digital` | テキスト | 全員書き込み可 | デジタル・行政改革 |
| `#general-policy` | テキスト | 全員書き込み可 | その他の政策議論 |

### カテゴリ: 📝 提案作業
| チャンネル | 種類 | 権限 | 説明 |
|-----------|------|------|------|
| `#proposal-drafting` | テキスト | 全員書き込み可 | 提案書の作成作業 |
| `#github-help` | テキスト | 全員書き込み可 | GitHub操作の質問 |
| `#data-research` | テキスト | 全員書き込み可 | 政策に関するデータ・調査の共有 |

### カテゴリ: 💬 コミュニティ
| チャンネル | 種類 | 権限 | 説明 |
|-----------|------|------|------|
| `#self-introduction` | テキスト | 全員書き込み可 | 自己紹介 |
| `#free-talk` | テキスト | 全員書き込み可 | 雑談 |
| `#feedback` | テキスト | 全員書き込み可 | 運営への意見・要望 |

### カテゴリ: 🔊 ボイス
| チャンネル | 種類 | 説明 |
|-----------|------|------|
| `議論ルーム1` | ボイス | 政策議論用 |
| `議論ルーム2` | ボイス | 政策議論用 |
| `雑談` | ボイス | フリートーク |

## 4. ロール（役割）の設定

サーバー設定 → ロール から以下を作成：

| ロール名 | 色 | 権限 | 説明 |
|---------|-----|------|------|
| `運営` | 赤 | 管理者 | サーバー管理者 |
| `モデレーター` | オレンジ | メッセージ管理、ミュート | 秩序維持 |
| `精査チーム` | 青 | 通常 + 精査チャンネルアクセス | 提案のブラッシュアップ担当 |
| `メンバー` | 緑 | 通常 | 一般参加者 |

## 5. ウェルカム画面の設定

サーバー設定 → コミュニティ → ウェルカム画面

以下を設定：

```
サーバーの説明:
「中道改革連合の政策提案プラットフォームです。市民が自由に政策を提案し、議論を通じてより良い政策を作り上げる場です。」

おすすめチャンネル:
1. #rules - まずルールをご確認ください
2. #self-introduction - 自己紹介をどうぞ
3. #general-policy - 政策議論に参加する
4. #github-help - GitHubの使い方を知る
5. #proposal-drafting - 提案を作成する
```

## 6. #rules チャンネルの内容

以下をコピーして `#rules` に投稿してください：

```
🏛️ サーバールール

1. 建設的な議論を心がけてください
   - 政策の中身について議論しましょう
   - 批判する場合は代替案も示しましょう

2. 個人攻撃・誹謗中傷は禁止です
   - 意見への反論はOK、人格否定はNG
   - 差別的な発言は即座に対処します

3. 政策議論に集中しましょう
   - 特定政党への攻撃ではなく政策で議論
   - 雑談は #free-talk でお願いします

4. 荒らし・スパムは禁止です
   - 繰り返しの違反はBANの対象です
   - 違反を見つけたらモデレーターに報告

5. 個人情報を公開しないでください
   - 自分や他人の個人情報を投稿しない
   - 匿名での参加も歓迎です

📌 GitHubでの政策提案はこちら:
https://github.com/kkhassou/chuudou-kaikaku-seisaku
```

## 7. GitHub → Discord Webhook 連携

GitHubの活動をDiscordに自動通知する設定です。

### Discord側の設定

1. `#github-feed` チャンネルの設定（⚙️アイコン）を開く
2. 「連携サービス」→「ウェブフック」
3. 「新しいウェブフック」をクリック
4. 名前: `GitHub Notifications`
5. 「ウェブフックURLをコピー」をクリック
6. **このURLをメモしておく**

### GitHub側の設定

1. リポジトリの Settings → Webhooks → Add webhook
2. Payload URL: （Discord Webhook URL）`/github` を末尾に追加
   - 例: `https://discord.com/api/webhooks/xxxxx/yyyyy/github`
3. Content type: `application/json`
4. 通知するイベントを選択:
   - Issues（提案の作成・更新）
   - Issue comments（コメント）
   - Discussions（ディスカッション）
   - Pull requests（提案書の修正）

※ このWebhook設定はCLIでも自動化できます。
  DiscordのWebhook URLを取得後、教えてください。

## 8. おすすめBot

| Bot | 用途 | 設定 |
|-----|------|------|
| **Carl-bot** | リアクションロール、自動モデレーション | ルール同意でメンバーロール付与 |
| **MEE6** | レベルシステム、自動モデレーション | 活発な参加者の可視化 |
| **Ticket Bot** | 問い合わせ管理 | 運営への個別相談 |

### Carl-bot でリアクションロール設定（推奨）

`#rules` チャンネルにルールを投稿し、✅ リアクションを押すと「メンバー」ロールが付与される設定。
新規参加者はルールに同意してからチャンネルにアクセスできるようになります。

## 9. 招待リンクの作成

1. サーバー名をクリック → 「友達を招待」
2. 「招待リンクを編集」→「有効期限なし」に設定
3. リンクをコピー
4. GitHubリポジトリのREADMEにこのリンクを設定

## チェックリスト

- [ ] サーバー作成
- [ ] コミュニティ機能有効化
- [ ] カテゴリ・チャンネル作成
- [ ] ロール設定
- [ ] ウェルカム画面設定
- [ ] #rules にルール投稿
- [ ] GitHub Webhook 連携
- [ ] 招待リンク作成・READMEに反映
- [ ] （任意）Carl-bot導入
